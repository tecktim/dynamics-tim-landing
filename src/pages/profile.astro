---
import BaseLayout from '../layouts/BaseLayout.astro';
import Timeline from '../components/Timeline.astro';
import ProjectCards from '../components/ProjectCards.astro';
import { getCollection } from 'astro:content';

const timeline = (await getCollection('timeline')).sort((a, b) => b.data.startDate.localeCompare(a.data.startDate));
const projects = (await getCollection('projects')).sort((a, b) => (a.data.featured === b.data.featured ? 0 : a.data.featured ? -1 : 1));
const certs = (await getCollection('certs')).sort((a, b) => b.data.issued.localeCompare(a.data.issued));
---

<BaseLayout title="Profil" description="Profil von Tim Friedrich: Dynamics 365 Freelancer für Sales/Service, Integrationen, Azure & DevOps.">
  <section class="bg-gradient-to-br from-white via-white to-brand-50 py-20">
    <div class="mx-auto max-w-5xl px-6">
      <h1 class="section-title">Über Tim Friedrich</h1>
      <p class="mt-6 text-lg text-slate-600">
        Ich verbinde tiefes Dynamics 365 Wissen mit Cloud-Architektur und DevOps. Mein Fokus: performante Integrationen, saubere Code-Bases und Teams, die selbständig liefern können.
      </p>
      <div class="mt-8 grid gap-6 md:grid-cols-2">
        <div class="card">
          <h2 class="text-xl font-semibold text-slate-900">Schwerpunkte</h2>
          <ul class="mt-4 space-y-2 text-sm text-slate-600">
            <li>• Dynamics 365 Sales & Service End-to-End</li>
            <li>• Azure Integration Services, Functions & Eventing</li>
            <li>• Power Platform, Plugins, Testautomatisierung</li>
            <li>• DevOps, Governance, Security & Monitoring</li>
          </ul>
        </div>
        <div class="card">
          <h2 class="text-xl font-semibold text-slate-900">Arbeitsweise</h2>
          <ul class="mt-4 space-y-2 text-sm text-slate-600">
            <li>• Transparente Roadmaps & kurze Feedback-Loops</li>
            <li>• Co-Creation mit internen Teams statt Silos</li>
            <li>• Fokus auf messbaren Business-Impact</li>
            <li>• Enablement & Dokumentation als Ergebnisbestandteil</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <Timeline items={timeline} />

  <ProjectCards items={projects} />

  <section class="bg-slate-900 py-20 text-white">
    <div class="mx-auto max-w-6xl px-6">
      <h2 class="section-title text-white">Zertifizierungen</h2>
      <div class="mt-10 grid gap-6 md:grid-cols-3">
        {certs.map((cert) => (
          <article class="card bg-white/5" key={cert.id}>
            <h3 class="text-xl font-semibold text-white">{cert.data.title}</h3>
            <p class="mt-2 text-sm text-slate-200">{cert.data.issuer} · {cert.data.issued}</p>
            <div class="mt-4 text-sm text-slate-200">
              {cert.data.skills.map((skill) => (
                <span class="mr-2 inline-flex items-center rounded-full bg-white/10 px-3 py-1 text-xs font-semibold" key={skill}>
                  {skill}
                </span>
              ))}
            </div>
            {cert.data.credentialUrl && (
              <a href={cert.data.credentialUrl} class="mt-4 inline-flex text-xs font-semibold text-brand-200 hover:text-white">
                Zertifikat ansehen →
              </a>
            )}
          </article>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>
