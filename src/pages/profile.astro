---
import BaseLayout from '../layouts/BaseLayout.astro';
import Timeline from '../components/Timeline.astro';
import ProjectCards from '../components/ProjectCards.astro';
import { getCollection } from 'astro:content';

const timeline = (await getCollection('timeline')).sort((a, b) => b.data.startDate.localeCompare(a.data.startDate));
const projects = (await getCollection('projects')).sort((a, b) => (a.data.featured === b.data.featured ? 0 : a.data.featured ? -1 : 1));
const certs = (await getCollection('certs')).sort((a, b) => b.data.issued.localeCompare(a.data.issued));
---

<BaseLayout
  title="Profil"
  description="Profil von Tim Friedrich: Dynamics 365 Freelancer für Power Platform Engineering, Azure Integrationen & DevOps Enablement."
  breadcrumbs={[
    { name: 'Startseite', url: '/' },
    { name: 'Profil', url: '/profile' }
  ]}
>
  <section class="bg-surface-100 py-20">
    <div class="mx-auto max-w-5xl px-6">
      <h1 class="section-title">Über Tim Friedrich</h1>
      <p class="mt-6 text-lg text-slate-600">
        Ich übersetze komplexe Service- und Vertriebsprozesse in Dynamics 365 Lösungen. Mein Fokus liegt auf Power Platform Engineering, Azure Integration und einer Delivery-Kultur, die Teams befähigt, selbstständig zu releasen.
      </p>
      <div class="mt-8 grid gap-6 md:grid-cols-2">
        <div class="card card--resume">
          <h2 class="text-xl font-semibold text-slate-900">Aktuelle Schwerpunkte</h2>
          <ul class="mt-4 space-y-2 text-sm text-slate-600">
            <li>• <strong>Freelance Delivery:</strong> End-to-End Dynamics 365 Engineering für Service- & Sales-Teams</li>
            <li>• <strong>Process Excellence:</strong> Canvas Apps, Custom Pages und Power Automate zur Beschleunigung des Case/Lead/Opportunity Managements</li>
            <li>• <strong>Custom Engineering:</strong> PCF Controls mit React/TypeScript und C# Plugins im Zusammenspiel mit Dataverse</li>
            <li>• <strong>Azure & DevOps:</strong> Azure Functions, Service Bus, CI/CD-Pipelines, Telemetrie und Code-Quality-Automatisierung</li>
          </ul>
        </div>
        <div class="card card--resume">
          <h2 class="text-xl font-semibold text-slate-900">Jüngste Projekthighlights</h2>
          <ul class="mt-4 space-y-2 text-sm text-slate-600">
            <li>• <strong>Code Quality & Security Automation:</strong> Bachelor-Projekt für automatisierte Qualitäts- und Security-Gates in Azure DevOps</li>
            <li>• <strong>CRM PCF Komponenten:</strong> Benutzerzentrierte Controls für Dynamics 365 Service in React & TypeScript</li>
            <li>• <strong>Azure Services Integration:</strong> Serverless Datenflüsse, Service Bus Routing und Observability</li>
            <li>• <strong>Azure Dev Ops Automation:</strong> Vollautomatische Orchestrierung des Release-Prozesses inklusive Monitoring und Backup</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <Timeline items={timeline} />

  <ProjectCards items={projects} />

  <section class="bg-gradient-to-br from-brand-900 via-brand-800 to-accent-600 py-20 text-white">
    <div class="mx-auto max-w-6xl px-6">
      <h2 class="section-title text-white">Zertifizierungen</h2>
      <div class="mt-10 grid gap-6 md:grid-cols-3">
        {certs.map((cert) => (
          <article class="card card--on-dark card--compact flex flex-col gap-4 text-left" key={cert.id}>
            <h3 class="text-xl font-semibold text-white">{cert.data.title}</h3>
            <p class="mt-2 text-sm text-slate-200">{cert.data.issuer} · {cert.data.issued}</p>
            <div class="mt-4 text-sm text-slate-200">
              {cert.data.skills.map((skill) => (
                <span class="mr-2 inline-flex items-center rounded-full bg-white/10 px-3 py-1 text-xs font-semibold" key={skill}>
                  {skill}
                </span>
              ))}
            </div>
            {cert.data.credentialUrl && (
              <a href={cert.data.credentialUrl} class="mt-4 inline-flex text-xs font-semibold text-accent-200 hover:text-white">
                Zertifikat ansehen ->
              </a>
            )}
          </article>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>



