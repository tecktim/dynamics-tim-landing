---
const base = import.meta.env.BASE_URL ?? '/';
const to = (path: string) => `${base}${path.replace(/^\//, '')}`;

const testimonials = [
  {
    title: 'ORBIS SE Referenz',
    quote:
      'Tim überzeugte durch seine exzellente Analysefähigkeit und fand für alle auftretenden Probleme ausnahmslos gute Lösungen.',
    attribution: 'Microsoft Platform Solutions, ORBIS SE'
  }
];

const currentTestimonial = testimonials[0];
const testimonialRotatorScript = `${base}scripts/testimonial-rotator.js`;
---

<section class="hero-ambient relative overflow-hidden bg-gradient-to-br from-brand-900 via-brand-800 to-accent-700 py-24 sm:py-28 lg:py-32 text-white">
  <div class="ambient-glow pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(77,162,242,0.4),_transparent_65%)] mix-blend-screen" aria-hidden="true"></div>
  <div class="ambient-gradient pointer-events-none absolute inset-0 blur-3xl" aria-hidden="true"></div>
  <div class="ambient-grid pointer-events-none absolute inset-0" aria-hidden="true"></div>
  <div class="floating-orb pointer-events-none absolute -right-24 top-20 h-[28rem] w-[28rem] rounded-full bg-[radial-gradient(circle,_rgba(28,186,205,0.42),_transparent_70%)] blur-3xl mix-blend-screen" aria-hidden="true"></div>
  <div class="floating-orb floating-orb--delay pointer-events-none absolute -left-32 bottom-6 h-[26rem] w-[26rem] rounded-full bg-[radial-gradient(circle,_rgba(77,162,242,0.38),_transparent_65%)] blur-3xl mix-blend-screen" aria-hidden="true"></div>
  <div class="relative mx-auto flex max-w-6xl flex-col gap-12 px-6 lg:flex-row lg:items-center lg:gap-16">
    <div class="max-w-3xl space-y-6">
      <div class="hero-badge inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/15 px-4 py-2 text-sm font-medium text-white/90 shadow-soft backdrop-blur-md ring-1 ring-white/10" data-reveal data-reveal-delay="0">
        Dynamics 365 · Power Platform · Azure
      </div>
      <h1 class="font-heading text-4xl font-bold leading-tight tracking-tight text-white sm:text-5xl lg:text-6xl xl:text-7xl" data-reveal data-reveal-delay="80">
        Wie verwandelt man <span class="hero-highlight-gradient">chaotische Prozesse</span> in<span class="hero-highlight-underline"> selbstlaufende Systeme?</span>
      </h1>
      <p class="max-w-2xl text-lg leading-relaxed text-brand-50/90 sm:text-xl" data-reveal data-reveal-delay="140">
        Ich kombiniere Power Platform Engineering, Azure Integrationen und DevOps, um komplexe Prozesse in skalierbare Anwendungen zu verwandeln.
      </p>
      <div class="flex flex-wrap items-center gap-4" data-reveal data-reveal-delay="200">
        <a
          href="mailto:hello@dynamics-tim.dev"
          class="cta-glow hero-cta group inline-flex items-center justify-center rounded-2xl bg-gradient-to-r from-signal-400 via-signal-300 to-signal-500 px-7 py-3 text-base font-semibold text-brand-900 shadow-[0_24px_56px_-18px_rgba(255,185,0,0.8)] transition-all duration-300 hover:-translate-y-0.5 hover:shadow-[0_30px_76px_-20px_rgba(255,185,0,0.85)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-200 focus-visible:ring-offset-2 focus-visible:ring-offset-brand-900"
        >
          <span>Kostenloses Erstgespräch</span>
        </a>
        <a
          href={to('services')}
          class="cta-outline hero-cta-outline inline-flex items-center justify-center rounded-2xl border border-white/35 bg-white/0 px-7 py-3 text-base font-semibold text-white/90 backdrop-blur-sm transition-all duration-300 hover:-translate-y-0.5 hover:border-white/60 hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 focus-visible:ring-offset-2 focus-visible:ring-offset-brand-900"
        >
          <span>Leistungen entdecken</span>
        </a>
      </div>
      <ul class="mt-8 grid gap-3 text-base text-white/90 sm:grid-cols-3" data-reveal data-reveal-delay="260">
        {[
          'Canvas Apps & Custom Pages',
          'C# Plugins & Power Automate',
          'Azure DevOps & Observability'
        ].map((item) => (
          <li class="flex items-center gap-3 rounded-xl border border-white/15 bg-white/10 px-3 py-2 shadow-soft backdrop-blur-sm" key={item}>
            <span class="flex h-8 w-8 items-center justify-center rounded-full bg-white/15 text-signal-400">
              <svg viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4">
                <path
                  fill-rule="evenodd"
                  d="M16.707 5.293a1 1 0 0 1 0 1.414l-7.25 7.25a1 1 0 0 1-1.414 0l-3.5-3.5a1 1 0 1 1 1.414-1.414l2.793 2.793 6.543-6.543a1 1 0 0 1 1.414 0z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </span>
            <span>{item}</span>
          </li>
        ))}
      </ul>
    </div>
    <div
      class="relative mx-auto w-full max-w-md"
      data-reveal
      data-reveal-delay="320"
      data-testimonial-rotator
      data-testimonial-items={JSON.stringify(testimonials)}
    >
      <div class="absolute -inset-8 rounded-3xl bg-gradient-to-br from-white/10 via-white/5 to-accent-200/20 blur-2xl"></div>
      <div class="relative rounded-3xl border border-white/15 bg-white/95 p-6 text-left text-slate-800 shadow-[0_20px_60px_rgba(0,39,76,0.25)] transition-opacity duration-500 backdrop-blur-sm" data-testimonial-card>
        <div class="space-y-4">
          <p class="text-sm font-semibold uppercase tracking-wide text-brand-600" data-testimonial-title>{currentTestimonial.title}</p>
          <p class="text-lg text-slate-700" data-testimonial-quote>
            "{currentTestimonial.quote}"
          </p>
          <p class="text-sm font-medium text-slate-500" data-testimonial-source>{currentTestimonial.attribution}</p>
        </div>
      </div>
      <div class="sr-only" role="status" aria-live="polite" data-testimonial-announcer>
        {currentTestimonial.title} - {currentTestimonial.attribution}
      </div>
    </div>
  </div>
</section>

<script type="module" src={testimonialRotatorScript}></script>
